# =============================================================================
# WriteBot Proxmox Production Configuration
# =============================================================================
# Copy this file to .env and update with your production values
#
# Usage:
#   cp .env.production.example .env
#   nano .env  # Edit with your values
#   docker compose -f docker-compose.production.yml up -d

# =============================================================================
# FLASK CONFIGURATION (Required)
# =============================================================================
FLASK_ENV=production
DEBUG=False

# Generate a new secret key with:
#   python -c 'import secrets; print(secrets.token_hex(32))'
SECRET_KEY=87d27fd71f96abf9e24e998f0717912bd15185a7f82370202272cc2ad59123f2

# =============================================================================
# POSTGRESQL DATABASE (LXC Container)
# =============================================================================
# IP address of PostgreSQL LXC container (default: 10.10.10.11)
POSTGRES_HOST=192.168.5.71
POSTGRES_PORT=5432
POSTGRES_DB=writebot
POSTGRES_USER=writebot_user
POSTGRES_PASSWORD=Writebot01

# Alternative: Set DATABASE_URL directly (overrides above settings)
# DATABASE_URL=postgresql://writebot:password@10.10.10.11:5432/writebot

# =============================================================================
# REDIS CACHE/RATE LIMITING (LXC Container)
# =============================================================================
# IP address of Redis LXC container (default: 10.10.10.12)
REDIS_HOST=192.168.5.114
REDIS_PORT=6379

# =============================================================================
# GPU CONFIGURATION (RTX 5090/5080 Blackwell)
# =============================================================================
# GPU device index (0 for first GPU, 0,1 for multiple GPUs)
CUDA_VISIBLE_DEVICES=0

# =============================================================================
# DOCKER BUILD ARGUMENTS
# =============================================================================
# These can be customized at build time
CUDA_VERSION=12.3.1
UBUNTU_VERSION=22.04
PYTHON_VERSION=3.11

# Gunicorn configuration (also available as runtime env vars)
GUNICORN_WORKERS=2
GUNICORN_THREADS=4
GUNICORN_TIMEOUT=180

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
# Application port (default: 5000)
APP_PORT=5000

# Maximum upload file size (16MB default)
MAX_CONTENT_LENGTH=16777216

# Memory limits for Docker containers
MEMORY_LIMIT=16G
CELERY_MEMORY_LIMIT=8G

# Cookie security settings
SESSION_COOKIE_SECURE=True
SESSION_COOKIE_HTTPONLY=True
SESSION_COOKIE_SAMESITE=Lax

# =============================================================================
# CLOUDFLARE TUNNEL (Optional)
# =============================================================================
# Configure Cloudflare Tunnel for HTTPS access
# Install cloudflared on Docker VM and configure separately
# The tunnel will connect to localhost:${APP_PORT}
#
# Setup commands:
#   cloudflared tunnel login
#   cloudflared tunnel create writebot
#   cloudflared tunnel route dns writebot your-domain.com
#
# Tunnel token (if using token-based auth instead of cert)
# CLOUDFLARE_TUNNEL_TOKEN=your-tunnel-token

# =============================================================================
# DEPLOYMENT INFO
# =============================================================================
DEPLOY_ENVIRONMENT=production
APP_VERSION=1.0.0

# =============================================================================
# PROXMOX NETWORK REFERENCE
# =============================================================================
# Default network layout (customize in proxmox-setup.sh):
#
# Component        | VMID | IP Address    | Purpose
# -----------------|------|---------------|------------------
# Docker VM        | 100  | 10.10.10.10   | WriteBot app + GPU
# PostgreSQL LXC   | 101  | 10.10.10.11   | Database server
# Redis LXC        | 102  | 10.10.10.12   | Cache/rate limiting
# Gateway          | -    | 10.10.10.1    | Network gateway
#
# Network: vmbr0 (10.10.10.0/24)